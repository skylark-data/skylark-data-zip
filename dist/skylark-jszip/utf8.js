/**
 * skylark-jszip - A skylark wrapper for jszip.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-binary/buffer","./utils","./support","./stream/GenericWorker"],function(t,e,r,n){"use strict";for(var a={},f=new Array(256),o=0;o<256;o++)f[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;f[254]=f[254]=1;function i(){n.call(this,"utf-8 decode"),this.leftOver=null}function u(){n.call(this,"utf-8 encode")}return a.utf8encode=function(e){return r.nodebuffer?t.from(e,"utf-8"):function(t){var e,n,a,f,o,i=t.length,u=0;for(f=0;f<i;f++)55296==(64512&(n=t.charCodeAt(f)))&&f+1<i&&56320==(64512&(a=t.charCodeAt(f+1)))&&(n=65536+(n-55296<<10)+(a-56320),f++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(u):new Array(u),o=0,f=0;o<u;f++)55296==(64512&(n=t.charCodeAt(f)))&&f+1<i&&56320==(64512&(a=t.charCodeAt(f+1)))&&(n=65536+(n-55296<<10)+(a-56320),f++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e}(e)},a.utf8decode=function(t){return r.nodebuffer?e.transformTo("nodebuffer",t).toString("utf-8"):function(t){var r,n,a,o,i=t.length,u=new Array(2*i);for(n=0,r=0;r<i;)if((a=t[r++])<128)u[n++]=a;else if((o=f[a])>4)u[n++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&r<i;)a=a<<6|63&t[r++],o--;o>1?u[n++]=65533:a<65536?u[n++]=a:(a-=65536,u[n++]=55296|a>>10&1023,u[n++]=56320|1023&a)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),e.applyFromCharCode(u)}(t=e.transformTo(r.uint8array?"uint8array":"array",t))},e.inherits(i,n),i.prototype.processChunk=function(t){var n=e.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=n;(n=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),n.set(o,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+f[t[r]]>e?r:e}(n),u=n;i!==n.length&&(r.uint8array?(u=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(u=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:a.utf8decode(u),meta:t.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=i,e.inherits(u,n),u.prototype.processChunk=function(t){this.push({data:a.utf8encode(t.data),meta:t.meta})},a.Utf8EncodeWorker=u,a});
//# sourceMappingURL=sourcemaps/utf8.js.map
